/* ===========================================
   sgiT Education - Chess Theme v2.0
   CI-konformes Schach-Design
   Grosses Brett, Premium-Look, Glasmorphismus
   =========================================== */

:root {
    /* Board-Farben - hoher Kontrast im Gruen-Spektrum */
    --chess-light-sq: #4a8c2a;
    --chess-dark-sq: #1e4a08;
    --chess-highlight: rgba(67, 210, 64, 0.6);
    --chess-check: rgba(231, 76, 60, 0.65);
    --chess-valid-dot: rgba(67, 210, 64, 0.55);
    --chess-capture-ring: rgba(67, 210, 64, 0.6);
    --chess-last-move-light: rgba(111, 255, 0, 0.25);
    --chess-last-move-dark: rgba(111, 255, 0, 0.18);
    --chess-board-border: rgba(67, 210, 64, 0.5);
    --chess-board-glow: rgba(67, 210, 64, 0.2);

    /* Board-Groessen */
    --chess-cell: 68px;
    --chess-piece-size: 3rem;
    --chess-coord-size: 0.7rem;
    --chess-valid-dot-size: 20px;
    --chess-capture-size: 58px;
}

/* ========== BOARD ========== */

.chess-board,
.board {
    display: grid;
    grid-template-columns: repeat(8, var(--chess-cell));
    grid-template-rows: repeat(8, var(--chess-cell));
    border: 4px solid var(--chess-board-border);
    border-radius: 10px;
    box-shadow:
        0 0 30px var(--chess-board-glow),
        0 0 60px rgba(67, 210, 64, 0.08),
        0 12px 40px rgba(0, 0, 0, 0.6);
    overflow: hidden;
}

/* Felder */
.cell {
    width: var(--chess-cell);
    height: var(--chess-cell);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    position: relative;
    font-size: var(--chess-piece-size);
    user-select: none;
    transition: background 0.15s ease;
}

.cell.light {
    background: var(--chess-light-sq);
}

.cell.dark {
    background: var(--chess-dark-sq);
}

/* Hervorhebungen */
.cell.selected {
    box-shadow: inset 0 0 0 4px rgba(67, 210, 64, 0.9);
    background: rgba(67, 210, 64, 0.3) !important;
}

.cell.valid-move {
    animation: chess-field-pulse 1.2s ease infinite;
}

.cell.valid-move::after {
    content: '';
    position: absolute;
    width: var(--chess-valid-dot-size);
    height: var(--chess-valid-dot-size);
    background: var(--chess-valid-dot);
    border-radius: 50%;
    box-shadow: 0 0 8px rgba(67, 210, 64, 0.3);
}

.cell.capture-move::after {
    content: '';
    position: absolute;
    width: var(--chess-capture-size);
    height: var(--chess-capture-size);
    background: transparent;
    border: 4px solid var(--chess-capture-ring);
    border-radius: 50%;
}

.cell.check {
    background: var(--chess-check) !important;
    animation: chess-shake 0.3s ease;
}

.cell.last-move.light {
    background: var(--chess-last-move-light) !important;
    background: linear-gradient(135deg, rgba(111, 255, 0, 0.22), var(--chess-light-sq)) !important;
}

.cell.last-move.dark {
    background: var(--chess-last-move-dark) !important;
    background: linear-gradient(135deg, rgba(111, 255, 0, 0.15), var(--chess-dark-sq)) !important;
}

/* ========== FIGUREN (SVG Images) ========== */

.piece-img {
    width: 85%;
    height: 85%;
    object-fit: contain;
    cursor: pointer;
    transition: transform 0.15s ease;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
    pointer-events: none;
}

.cell:hover .piece-img {
    transform: scale(1.12);
}

/* Fallback fuer Unicode-Text-Pieces (Promotion-Buttons etc.) */
.piece {
    cursor: pointer;
    transition: transform 0.15s ease;
    line-height: 1;
}

.piece:hover {
    transform: scale(1.15);
}

/* ========== KOORDINATEN ========== */

.coord {
    position: absolute;
    font-size: var(--chess-coord-size);
    font-weight: 700;
    pointer-events: none;
}

.coord.file { bottom: 3px; right: 5px; }
.coord.rank { top: 3px; left: 5px; }

.cell.light .coord { color: #1e4a08; opacity: 0.6; }
.cell.dark .coord { color: #6FFF00; opacity: 0.5; }

/* ========== GLASMORPHISMUS PANELS ========== */

.chess-board-area,
.board-area {
    background: rgba(20, 45, 5, 0.7);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(67, 210, 64, 0.25);
    border-radius: 20px;
    padding: 25px;
    box-shadow:
        0 0 20px rgba(67, 210, 64, 0.08),
        0 10px 40px rgba(0, 0, 0, 0.4);
    display: flex;
    flex-direction: column;
    align-items: center;
}

.chess-info-card,
.info-card {
    background: rgba(20, 45, 5, 0.6);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid rgba(67, 210, 64, 0.2);
    border-radius: 14px;
    padding: 16px;
}

/* ========== KI-DENK-INDIKATOR ========== */

.chess-thinking,
.thinking-indicator {
    display: none;
    align-items: center;
    gap: 12px;
    padding: 12px 18px;
    background: rgba(67, 210, 64, 0.08);
    border: 1px solid rgba(67, 210, 64, 0.3);
    border-radius: 12px;
    margin-top: 14px;
    font-size: 0.95rem;
}

.chess-thinking.active,
.thinking-indicator.active {
    display: flex;
}

.chess-thinking-dots,
.thinking-dots {
    display: flex;
    gap: 5px;
}

.chess-thinking-dots span,
.thinking-dots span {
    width: 10px;
    height: 10px;
    background: #43D240;
    border-radius: 50%;
    animation: chess-dot-bounce 1.2s ease-in-out infinite;
}

.chess-thinking-dots span:nth-child(2),
.thinking-dots span:nth-child(2) { animation-delay: 0.15s; }
.chess-thinking-dots span:nth-child(3),
.thinking-dots span:nth-child(3) { animation-delay: 0.3s; }

/* ========== SCHWIERIGKEITS-AUSWAHL ========== */

.chess-difficulty-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 10px;
    margin: 15px 0;
}

.chess-difficulty-btn {
    background: rgba(20, 45, 5, 0.6);
    border: 2px solid rgba(67, 210, 64, 0.2);
    border-radius: 14px;
    padding: 18px 12px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    color: #fff;
}

.chess-difficulty-btn:hover {
    border-color: rgba(67, 210, 64, 0.5);
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(67, 210, 64, 0.15);
}

.chess-difficulty-btn.active {
    border-color: #43D240;
    background: rgba(67, 210, 64, 0.12);
    box-shadow: 0 0 20px rgba(67, 210, 64, 0.2);
}

.chess-difficulty-btn .level-icon { font-size: 2rem; margin-bottom: 8px; }
.chess-difficulty-btn .level-name { font-weight: 600; font-size: 1rem; margin-bottom: 4px; }
.chess-difficulty-btn .level-elo { font-size: 0.8rem; color: #a0a0a0; }

/* ========== FARBWAHL ========== */

.chess-color-choice {
    display: flex;
    gap: 14px;
    justify-content: center;
    margin: 15px 0;
}

.chess-color-btn {
    width: 80px;
    height: 80px;
    border: 3px solid rgba(67, 210, 64, 0.2);
    border-radius: 14px;
    font-size: 2.8rem;
    cursor: pointer;
    transition: all 0.3s ease;
    background: rgba(20, 45, 5, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
}

.chess-color-btn:hover {
    border-color: rgba(67, 210, 64, 0.5);
    transform: translateY(-3px);
}

.chess-color-btn.active {
    border-color: #43D240;
    background: rgba(67, 210, 64, 0.12);
    box-shadow: 0 0 16px rgba(67, 210, 64, 0.25);
}

/* ========== ZUG-LISTE ========== */

.chess-move-list {
    max-height: 220px;
    overflow-y: auto;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 0.9rem;
    padding: 8px;
}

.chess-move-list::-webkit-scrollbar { width: 5px; }
.chess-move-list::-webkit-scrollbar-track { background: transparent; }
.chess-move-list::-webkit-scrollbar-thumb { background: rgba(67, 210, 64, 0.3); border-radius: 3px; }

.chess-move-row {
    display: flex;
    gap: 10px;
    padding: 3px 6px;
    border-radius: 4px;
}

.chess-move-row:nth-child(odd) { background: rgba(255, 255, 255, 0.03); }
.chess-move-num { color: #666; min-width: 28px; }
.chess-move-white, .chess-move-black { min-width: 60px; }

/* ========== ANIMATIONEN ========== */

@keyframes chess-shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

@keyframes chess-field-pulse {
    0%, 100% { box-shadow: inset 0 0 0 0 rgba(67, 210, 64, 0); }
    50% { box-shadow: inset 0 0 12px 2px rgba(67, 210, 64, 0.15); }
}

@keyframes chess-dot-bounce {
    0%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-8px); }
}

@keyframes chess-piece-slide {
    from { transform: translate(var(--slide-x, 0), var(--slide-y, 0)); }
    to { transform: translate(0, 0); }
}

@keyframes chess-capture-flash {
    0% { background: inherit; }
    30% { background: rgba(231, 76, 60, 0.35); }
    100% { background: inherit; }
}

.piece-img.sliding { animation: chess-piece-slide 0.25s ease-out; }
.cell.just-captured { animation: chess-capture-flash 0.5s ease; }

/* Promotion Button mit SVG */
.promo-btn img {
    width: 52px;
    height: 52px;
    object-fit: contain;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4));
}

/* ========== RESPONSIVE ========== */

/* Tablet */
@media (max-width: 900px) {
    :root {
        --chess-cell: 58px;
        --chess-piece-size: 2.6rem;
        --chess-capture-size: 50px;
    }
}

/* Mobile */
@media (max-width: 550px) {
    :root {
        --chess-cell: 44px;
        --chess-piece-size: 2.1rem;
        --chess-valid-dot-size: 15px;
        --chess-capture-size: 38px;
        --chess-coord-size: 0.55rem;
    }
    .chess-board-area, .board-area { padding: 14px; border-radius: 14px; }
    .chess-difficulty-grid { grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 6px; }
    .chess-difficulty-btn { padding: 12px 8px; }
}

/* Kleine Handys */
@media (max-width: 400px) {
    :root {
        --chess-cell: 38px;
        --chess-piece-size: 1.8rem;
        --chess-valid-dot-size: 12px;
        --chess-capture-size: 32px;
        --chess-coord-size: 0.5rem;
    }
    .chess-board-area, .board-area { padding: 10px; }
}
